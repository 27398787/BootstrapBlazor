@page "/uploads"

<h3>Upload 上传</h3>

<h4>通过点击或者拖拽上传文件</h4>

<Block Title="基本用法" Introduction="与其他表单组件一起使用，显示文件名称，点击 <b>浏览</b> 按钮后选择文件并上传；通过设置 <code>ShowRemoveButton</code> 参数，显示 <b>删除</b> 按钮，点击删除按钮时回调 <code>OnDelete</code> 委托方法" CodeFile="upload.1.html">
    <div class="form-inline">
        <div class="row">
            <div class="form-group col-12 col-sm-6">
                <label for="text1" class="control-label">姓名:</label>
                <input id="text1" class="form-control">
            </div>
            <div class="form-group col-12 col-sm-6">
                <label for="text2" class="control-label">地址:</label>
                <input id="text2" class="form-control">
            </div>
            <div class="form-group col-12">
                <label for="text3" class="control-label">照片:</label>
                <Upload Id="text3" ShowDeleteButton="true" OnChange="@OnFileChange" OnDelete="@OnFileDelete"></Upload>
            </div>
        </div>
    </div>
    <Logger @ref="Trace" />
</Block>

<Block Title="点击上传" Introduction="经典款式，用户点击按钮弹出文件选择框。" CodeFile="upload.2.html">
    <div class="row">
        <div class="col-12 col-sm-6">
            <Upload Style="UploadStyle.ClickToUpload" ShowProgress="true" OnChange="@OnClickToUpload" OnDelete="@(fileName => Task.FromResult(true))"></Upload>
        </div>
    </div>
    <p>设置 <code>IsSingle</code> 时，仅可以上传一张图片或者文件</p>
    <div class="row mt-3">
        <div class="col-12 col-sm-6">
            <Upload Style="UploadStyle.ClickToUpload" IsSingle="true" OnChange="@OnClickToUpload" OnDelete="@(fileName => Task.FromResult(true))"></Upload>
        </div>
    </div>
</Block>

<Block Title="已上传文件列表" Introduction="使用 <code>DefaultFileList</code> 设置已上传的内容" CodeFile="upload.3.html">
    <div class="row">
        <div class="col-12 col-sm-6">
            @{
                var DefaultFileList = new List<UploadFile>();
                DefaultFileList.AddRange(new[]
                {
                    new UploadFile()
                    {
                        OriginFileName = "default1.jpg"
                    },
                    new UploadFile()
                    {
                        OriginFileName = "default2.jpg",
                        Code = 1
                    }
                });
            }
            <Upload Style="UploadStyle.ClickToUpload" OnDelete="@(fileName => Task.FromResult(true))" DefaultFileList="@DefaultFileList"></Upload>
        </div>
    </div>
</Block>

<Block Title="上传文件夹" Introduction="使用 <code>DefaultFileList</code> 设置已上传的内容" CodeFile="upload.4.html">
    <p>上传整个文件夹功能请设置 <code>MaxFileCount</code> 参数，默认值为 10</p>
    <div class="row">
        <div class="col-12 col-sm-6">
            <Upload Style="UploadStyle.ClickToUpload" IsDirectory="true" MaxFileCount="100" OnChange="@OnUploadFolder" OnDelete="@(fileName => Task.FromResult(true))"></Upload>
        </div>
    </div>
</Block>

<Block Title="用户头像上传" Introduction="使用 <code>OnChange</code> 限制用户上传的图片格式和大小。本例中仅允许上传 <code>jpg/png/bmp/jpeg/gif</code> 五种图片格式" CodeFile="upload.5.html">
    <div class="row">
        <div class="col-12">
            <p>卡片形式头像框</p>
            <Upload Style="UploadStyle.Avatar" OnChange="@OnAvatarUpload" OnDelete="@(fileName => Task.FromResult(true))"></Upload>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-12">
            <p>圆形头像框</p>
            <Upload Style="UploadStyle.Avatar" ShowProgress="true" IsCircle="true" OnChange="@OnAvatarUpload" OnDelete="@(fileName => Task.FromResult(true))"></Upload>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-12">
            <p>设置 <code>IsSingle</code> 时，仅可以上传一张图片或者文件</p>
            <Upload Style="UploadStyle.Avatar" IsSingle="true" OnChange="@OnAvatarUpload" OnDelete="@(fileName => Task.FromResult(true))"></Upload>
        </div>
    </div>
</Block>

<Block Title="预览卡片式" Introduction="设置参数为 <code>UploadStyle.Card</code> 时，组件呈现为卡片式带预览模式" CodeFile="upload.6.html">
    <div class="row">
        <div class="col-12">
            <p>本例中使用 <code>IWebHostEnviroment</code> 注入服务获取到 <code>wwwwroot</code> 目录，保存文件到 <code>images\uploader</code> 中，此功能无需 <b>MVC</b> 的控制器辅助进行文件的保存，直接调用 <code>SaveToFile</code> 方法即可</p>
            <Upload Style="UploadStyle.Card" ShowProgress="true" OnChange="@OnCardUpload" OnDelete="@(fileName => Task.FromResult(true))"></Upload>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-12">
            <p>设置 <code>IsSingle</code> 时，仅可以上传一张图片或者文件，本例中未设置 <code>ShowProgress</code> 使用其默认值，不显示上传进度条</p>
            <Upload Style="UploadStyle.Card" IsSingle="true" OnChange="@OnCardUpload" OnDelete="@(fileName => Task.FromResult(true))"></Upload>
        </div>
    </div>
</Block>

<Toast />

<AttributeTable Items="@GetAttributes()" />

<EventTable Items="@GetEvents()" />
