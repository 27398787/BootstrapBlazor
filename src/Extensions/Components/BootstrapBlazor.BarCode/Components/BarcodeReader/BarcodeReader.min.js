export function bb_barcode(t,i,r,u){n=new ZXing.BrowserMultiFormatReader;t.getAttrbite("data-scan")==="Camera"&&n.getVideoInputDevices().then(n=>{u.invokeMethodAsync("InitDevices",n).then(()=>{if(r&&n.length>0){var t=$el.find('button[data-method="scan"]'),i=$el.attr("data-scan");i==="Camera"&&t.trigger("click")}})});$el.on("click","button[data-method]",function(){var i=$(this).attr("data-method"),f,e,r,t;if(i==="scan")u.invokeMethodAsync("Start"),f=$el.find(".dropdown-item.active").attr("data-val"),e=$el.find("video").attr("id"),n.decodeFromVideoDevice(f,e,(t,i)=>{if(t){$.bb_vibrate();console.log(t.text);u.invokeMethodAsync("GetResult",t.text);var r=$el.attr("data-autostop")==="true";r&&n.reset()}!i||i instanceof ZXing.NotFoundException||(console.error(i),u.invokeMethodAsync("GetError",i))});else if(i==="scanImage"){n=new ZXing.BrowserMultiFormatReader;$el.find(":file").remove();r=$(".scanner-image");t=$('<input type="file" hidden accept="image/*">');$el.append(t);t.on("change",function(){if(this.files.length!==0){var t=new FileReader;t.onloadend=function(t){r.attr("src",t.target.result);n.decodeFromImage(r[0]).then(n=>{n&&($.bb_vibrate(),console.log(n.text),u.invokeMethodAsync("GetResult",n.text))}).catch(n=>{n&&(console.log(n),u.invokeMethodAsync("GetError",n.message))})};t.readAsDataURL(this.files[0])}});t.trigger("click")}else i==="close"&&(n.reset(),u.invokeMethodAsync("Stop"))})}export function bb_barcode_dispose(){n!=null&&n.reset()}let n=null;