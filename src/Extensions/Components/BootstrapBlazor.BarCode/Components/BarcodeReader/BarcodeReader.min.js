export function bb_barcode(t,i,r,u){var f=$(t);n=new ZXing.BrowserMultiFormatReader;f.attr("data-scan")==="Camera"&&n.getVideoInputDevices().then(n=>{u.invokeMethodAsync("InitDevices",n).then(()=>{if(r&&n.length>0){var t=f.find('button[data-method="scan"]'),i=f.attr("data-scan");i==="Camera"&&t.trigger("click")}})});f.on("click","button[data-method]",function(){var i=$(this).attr("data-method"),e,o,r,t;if(i==="scan")u.invokeMethodAsync("Start"),e=f.find(".dropdown-item.active").attr("data-val"),o=f.find("video").attr("id"),n.decodeFromVideoDevice(e,o,(t,i)=>{if(t){$.bb_vibrate();console.log(t.text);u.invokeMethodAsync("GetResult",t.text);var r=f.attr("data-autostop")==="true";r&&n.reset()}!i||i instanceof ZXing.NotFoundException||(console.error(i),u.invokeMethodAsync("GetError",i))});else if(i==="scanImage"){n=new ZXing.BrowserMultiFormatReader;f.find(":file").remove();r=$(".scanner-image");t=$('<input type="file" hidden accept="image/*">');f.append(t);t.on("change",function(){if(this.files.length!==0){var t=new FileReader;t.onloadend=function(t){r.attr("src",t.target.result);n.decodeFromImage(r[0]).then(n=>{n&&($.bb_vibrate(),console.log(n.text),u.invokeMethodAsync("GetResult",n.text))}).catch(n=>{n&&(console.log(n),u.invokeMethodAsync("GetError",n.message))})};t.readAsDataURL(this.files[0])}});t.trigger("click")}else i==="close"&&(n.reset(),u.invokeMethodAsync("Stop"))})}export function bb_barcode_dispose(){n!=null&&n.reset()}let n=null;