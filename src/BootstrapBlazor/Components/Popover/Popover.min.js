(function(n){n.extend({bb_confirm:function(t){var r=n('[data-bs-target="'+t+'"]'),i=n("#"+t);i.popover({toggle:"confirm",html:!0,sanitize:!1,content:r.find(".popover-body").html()});i.popover("show")},bb_popover:function(t,i,r,u,f,e,o){var s=n("#"+t),h={html:e,sanitize:!1,title:r,content:u,placement:f,trigger:o};i===""?(s.data("bs.popover")&&s.popover("dispose"),s.popover(h)):i==="dispose"?s.data("bs.popover")&&s.popover(i):(s.data("bs.popover")||s.popover(h),s.popover(i))},bb_datetimePicker:function(t,i){var r=n(t),f=r.attr("data-bs-placement")||"auto",u=r.find(".datetime-picker-input");if(i)u.popover(i);else{u.popover({toggle:"datetime-picker",placement:f}).on("inserted.bs.popover",function(){var u=this.getAttribute("aria-describedby"),i,t;u&&(i=n("#"+u),t=i.find(".popover-body"),t.length===0&&(t=n('<div class="popover-body"><\/div>').appendTo(i)),t.append(r.find(".date-picker").removeClass("d-none")))}).on("hide.bs.popover",function(){var t=this.getAttribute("aria-describedby"),i,u;t&&(i=n("#"+t),u=i.find(".date-picker"),r.append(u.addClass("d-none")))});n(".datetime-picker-input-icon").on("click",function(t){if(!n(this).hasClass("disabled")){t.stopImmediatePropagation();var i=n(this).parents(".datetime-picker-bar").find(".datetime-picker-input");i.trigger("click")}});n(".disabled .cell").on("click",function(n){n.preventDefault();n.stopImmediatePropagation()})}},bb_datetimeRange:function(t,i){var r=n(t),f=r.attr("data-bs-placement")||"auto",u=r.find(".datetime-range-bar");if(i)u.popover(i);else{u.popover({toggle:"datetime-range",placement:f}).on("inserted.bs.popover",function(){var u=this.getAttribute("aria-describedby"),i,t;u&&(i=n("#"+u),t=i.find(".popover-body"),t.length===0&&(t=n('<div class="popover-body"><\/div>').appendTo(i)),t.append(r.find(".datetime-range-body").removeClass("d-none")))}).on("hide.bs.popover",function(){var t=this.getAttribute("aria-describedby"),i,u;t&&(i=n("#"+t),u=i.find(".datetime-range-body"),r.append(u.addClass("d-none")))});r.find(".is-clear").on("click",function(){u.popover("hide")})}}});n(function(){var i,t;n.fn.popover.Constructor.prototype.isWithContent=function(){var n=this._config.toggle;return["","confirm","datetime-picker","datetime-range"].indexOf(n)||this.getTitle()||this._getContent()};i=n.fn.popover.Constructor.prototype.getTipElement;n.fn.popover.Constructor.prototype.getTipElement=function(){var r=this._config.toggle,u=i.call(this),t=n(u).addClass("shadow");return t.find(".popover-header").length>0&&t.addClass("has-header"),r==="datetime-picker"&&t.addClass("popover-datetime"),r==="datetime-range"&&t.addClass("popover-datetime-range"),u};t=function(t){var i=null,r=t.parents(".popover"),u;return r.length>0&&(u=r.attr("id"),i=n('[aria-describedby="'+u+'"]')),i};n(document).on("click",function(i){var u=!0,r=n(i.target),f=t(r);f!=null&&(u=!1);u&&n('[data-bs-toggle="confirm"][aria-describedby^="popover"]').popover("hide");r.parents(".popover-datetime.show").length===0&&n(".popover-datetime.show").each(function(){var t=this.getAttribute("id"),i;t&&(i=n('[aria-describedby="'+t+'"]'),r.attr("aria-describedby")!==t&&i.popover("hide"))});r.parents(".popover-datetime-range.show").length===0&&n(".popover-datetime-range.show").each(function(){var t=this.getAttribute("id"),i;t&&(i=n('[aria-describedby="'+t+'"]'),r.parents(".datetime-range-bar").attr("aria-describedby")!==t&&i.popover("hide"))})});n(document).on("click",".popover-confirm-buttons .btn",function(i){var r,u,f;i.stopPropagation();r=t(n(this));r!=null&&(r.popover("hide"),u=r.attr("id"),$ele=n('[data-bs-target="'+u+'"]'),f=this.getAttribute("data-dismiss")==="confirm"?$ele.find(".popover-confirm-buttons .btn:first"):$ele.find(".popover-confirm-buttons .btn:last"),f.trigger("click"))})})})(jQuery);